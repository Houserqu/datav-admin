(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{VGLV:function(e,t,a){e.exports={row:"antd-pro-pages-account-settings-geographic-view-row",item:"antd-pro-pages-account-settings-geographic-view-item"}},dzOB:function(e,t,a){"use strict";a.r(t);a("5NDa");var n,i,r,s,c,o,l,p=a("5rEg"),u=(a("miYZ"),a("tsqr")),m=a("p0pE"),g=a.n(m),v=a("2Taf"),d=a.n(v),f=a("vZ4D"),h=a.n(f),b=a("l4Ni"),y=a.n(b),w=a("ujKo"),E=a.n(w),k=a("MhPg"),O=a.n(k),V=(a("DZo9"),a("8z0m"),a("+L6B"),a("2/Rp")),j=(a("OaEy"),a("2fM7")),M=(a("y8nQ"),a("Vl3Y")),C=a("q1tI"),I=a.n(C),N=a("LLXN"),U=a("MuoO"),D=a("gJV7"),L=a.n(D),P=(a("T2oS"),a("W9HT")),x=a("VGLV"),S=a.n(x),_=j["a"].Option,A={label:"",key:""},R=(n=Object(U["connect"])(function(e){var t=e.geographic,a=t.province,n=t.isLoading,i=t.city;return{province:a,city:i,isLoading:n}}),n((r=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=y()(this,(e=E()(t)).call.apply(e,[this].concat(i))),a.getCityOption=function(){var e=a.props.city;return a.getOption(e)},a.getOption=function(e){return!e||e.length<1?I.a.createElement(_,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return I.a.createElement(_,{key:e.id,value:e.id},e.name)})},a.selectProvinceItem=function(e){var t=a.props,n=t.dispatch,i=t.onChange;n({type:"geographic/fetchCity",payload:e.key}),i({province:e,city:A})},a.selectCityItem=function(e){var t=a.props,n=t.value,i=t.onChange;i({province:n.province,city:e})},a}return O()(t,e),h()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.value;!e.value&&n&&n.province&&a({type:"geographic/fetchCity",payload:n.province.key})}},{key:"getProvinceOption",value:function(){var e=this.props.province;return this.getOption(e)}},{key:"conversionObject",value:function(){var e=this.props.value;if(!e)return{province:A,city:A};var t=e.province,a=e.city;return{province:t||A,city:a||A}}},{key:"render",value:function(){var e=this.conversionObject(),t=e.province,a=e.city,n=this.props.isLoading;return I.a.createElement(P["a"],{spinning:n,wrapperClassName:S.a.row},I.a.createElement(j["a"],{className:S.a.item,value:t,labelInValue:!0,showSearch:!0,onSelect:this.selectProvinceItem},this.getProvinceOption()),I.a.createElement(j["a"],{className:S.a.item,value:a,labelInValue:!0,showSearch:!0,onSelect:this.selectCityItem},this.getCityOption()))}}]),t}(C["PureComponent"]),i=r))||i),q=R,B=a("uy6Z"),F=a.n(B),T=(C["PureComponent"],M["a"].Item),Z=(j["a"].Option,function(e,t,a){var n=t.province,i=t.city;n.key||a("Please input your province!"),i.key||a("Please input your city!"),a()}),z=(s=Object(U["connect"])(function(e){var t=e.user;return{currentUser:t.currentUser}}),c=M["a"].create(),s(o=c((l=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=y()(this,(e=E()(t)).call.apply(e,[this].concat(i))),a.setBaseInfo=function(){var e=a.props,t=e.currentUser,n=e.form;Object.keys(n.getFieldsValue()).forEach(function(e){var a={};a[e]=t[e]||null,n.setFieldsValue(a)})},a.getViewDom=function(e){a.view=e},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.dispatch,i=t.form,r=t.currentUser;i.validateFields(["nickName","email","userRemark","userAddress","account","phone"],function(e,t){e||n({type:"user/updateUserInfo",payload:g()({},t,{id:r.id}),callback:function(e){200===e.statusCode&&u["a"].success("\u4fee\u6539\u6210\u529f")}})})},a}return O()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.setBaseInfo()}},{key:"getAvatarURL",value:function(){var e=this.props.currentUser;if(e.avatar)return e.avatar;var t="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png";return t}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.currentUser;return I.a.createElement("div",{className:L.a.baseView,ref:this.getViewDom},I.a.createElement("div",{className:L.a.left},I.a.createElement(M["a"],{layout:"vertical",onSubmit:this.handleSubmit,hideRequiredMark:!0},I.a.createElement(T,{label:"\u8d26\u53f7"},t("account",{initialValue:a.account,rules:[{required:!0}]})(I.a.createElement(p["a"],{disabled:!0}))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.email"})},t("email",{initialValue:a.email})(I.a.createElement(p["a"],null))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.nickname"})},t("nickName",{initialValue:a.nickName})(I.a.createElement(p["a"],null))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.profile"})},t("userRemark",{initialValue:a.userRemark})(I.a.createElement(p["a"].TextArea,{placeholder:Object(N["formatMessage"])({id:"app.settings.basic.profile-placeholder"}),rows:4}))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.geographic"})},t("geographic",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.geographic-message"},{})},{validator:Z}]})(I.a.createElement(q,null))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.address"})},t("userAddress",{initialValue:a.userAddress})(I.a.createElement(p["a"],null))),I.a.createElement(T,{label:Object(N["formatMessage"])({id:"app.settings.basic.phone"})},t("phone",{initialValue:a.phone})(I.a.createElement(p["a"],null))),I.a.createElement(V["a"],{type:"primary",htmlType:"submit"},I.a.createElement(N["FormattedMessage"],{id:"app.settings.basic.update",defaultMessage:"Update Information"})))))}}]),t}(C["Component"]),o=l))||o)||o);t["default"]=z},gJV7:function(e,t,a){e.exports={baseView:"antd-pro-pages-account-settings-base-view-baseView",left:"antd-pro-pages-account-settings-base-view-left",right:"antd-pro-pages-account-settings-base-view-right",avatar_title:"antd-pro-pages-account-settings-base-view-avatar_title",avatar:"antd-pro-pages-account-settings-base-view-avatar",button_view:"antd-pro-pages-account-settings-base-view-button_view"}},uy6Z:function(e,t,a){e.exports={area_code:"antd-pro-pages-account-settings-phone-view-area_code",phone_number:"antd-pro-pages-account-settings-phone-view-phone_number"}}}]);