(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"4hti":function(e,t,a){"use strict";a.r(t);var n=a("2Taf"),l=a.n(n),r=a("vZ4D"),o=a.n(r),c=a("l4Ni"),i=a.n(c),s=a("ujKo"),d=a.n(s),p=a("MhPg"),m=a.n(p),u=a("q1tI"),h=a.n(u),y=a("MuoO"),g=a("U/Yh"),E=a("ChGz"),f=a.n(E),v=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),C=(a("giR+"),a("fyUT")),k=(a("5NDa"),a("5rEg")),O=(a("y8nQ"),a("Vl3Y")),S=a("jehZ"),w=a.n(S),D=a("Y/ft"),I=a.n(D),x=(a("OaEy"),a("2fM7")),F=a("FMjr"),N=a.n(F),P=(a("2qtc"),a("kLXV")),A=(a("Znn+"),a("ZTPi")),$=a("lc5D"),j=a.n($),z=(a("Bhyg"),a("tag3"),a("gYtI"),a("ZcU/")),L=(a("+L6B"),a("2/Rp")),T=a("UprE"),M=a("AnjC");function G(e){var t,a=e.data,n=e.type;try{t=JSON.parse(a.content)}catch(e){t=[]}switch(n){case 2:return h.a.createElement("div",{className:N.a.contentInfo},h.a.createElement("p",{key:"refresh"},h.a.createElement("b",null,"\u5237\u65b0\u65f6\u95f4"),": ",0===a.refresh?"\u4e0d\u5237\u65b0":a.refresh),Object.keys(t).map(function(e){return h.a.createElement("p",{key:e},h.a.createElement("b",null,e),": ",t[e])}));case 1:return h.a.createElement("div",{className:N.a.contentInfo},h.a.createElement("p",{key:"refresh"},h.a.createElement("b",null,"\u5237\u65b0\u65f6\u95f4"),": ",a.refresh),h.a.createElement(j.a,{mode:"json",theme:"xcode",readOnly:!0,name:"UNIQUE_ID_OF_DIV",value:a.content,style:{height:400,width:"100%"},editorProps:{$blockScrolling:1/0},tabSize:2}));case-1:return h.a.createElement("div",{className:N.a.contentInfo},h.a.createElement("p",{key:"refresh"},"\u81ea\u5b9a\u4e49\u6570\u636e\u76f4\u63a5\u5728 echart \u914d\u7f6e\u9879\u4e2d\u914d\u7f6e"));default:return"\u65e0\u6cd5\u663e\u793a"}}var U,J,B,H,V,Y,_,Q,R,Z,K,W,q,X=x["a"].Option,ee=(L["a"].Group,function(e){var t=e.children,a=I()(e,["children"]);return h.a.createElement(O["a"].Item,w()({},a,{style:{marginBottom:10,height:30},labelCol:{span:2},wrapperCol:{span:22}}),t)}),te=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=i()(this,(e=d()(t)).call.apply(e,[this].concat(r))),a.handleSelectData=function(e){var t=a.props.onSubmit;t(e)},a}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.userData,a=void 0===t?[]:t,n=e.source,l=void 0===n?"":n,r=-1===l?{type:-1}:T["a"](M["a"]("id",l))(a);return h.a.createElement("div",{style:{padding:5}},h.a.createElement(ee,{label:"\u6570\u636e"},h.a.createElement(x["a"],{size:"small",value:l,onChange:this.handleSelectData,style:{width:200}},a.map(function(e){return h.a.createElement(X,{key:e.id,value:e.id},e.name)}),h.a.createElement(X,{key:-1,value:-1},"\u7ec4\u4ef6\u81ea\u5b9a\u4e49"))),l&&h.a.createElement(ee,{label:"\u5185\u5bb9"},h.a.createElement(G,{data:r,type:r.type})))}}]),t}(u["Component"]),ae=a("2wk3"),ne=a("BRui"),le=A["a"].TabPane,re=(U=Object(y["connect"])(function(e){var t=e.design,a=e.data;return{design:t,userData:a}}),U((B=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=i()(this,(e=d()(t)).call.apply(e,[this].concat(r))),a.state={tmpEchartOptString:JSON.stringify(a.props.echartOpt,null,2),tmpDataSource:a.props.source},a.handleChange=function(e){a.setState({tmpEchartOptString:e})},a.resetEditor=function(){a.setState({tmpEchartOptString:""})},a.handleSubmit=function(){var e=a.props.onSubmit,t=a.state,n=t.tmpEchartOptString,l=t.tmpDataSource;e(JSON.parse(n),l),a.handleClose()},a.handleClose=function(){var e=a.props.dispatch;e({type:"design/toggleComEditor",payload:{show:!1}})},a.handleSubmitData=function(e){a.setState({tmpDataSource:e})},a}return m()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){e.comId!==this.props.comId&&(this.setState({tmpEchartOptString:JSON.stringify(e.echartOpt,null,2)}),this.setState({tmpDataSource:e.source}))}},{key:"render",value:function(){var e=this.props,t=e.design.comEditorShow,a=void 0!==t&&t,n=e.data,l=e.comId,r=e.userDataList,o=e.page,c=e.style,i=this.state,s=i.tmpEchartOptString,d=i.tmpDataSource,p={};try{p=JSON.parse(s)}catch(e){p={}}return h.a.createElement("div",null,h.a.createElement(P["a"],{maskClosable:!1,onCancel:this.handleClose,width:"80%",title:null,visible:a,onOk:this.handleSubmit,destroyOnClose:!0,bodyStyle:{height:"76vh"}},h.a.createElement(v["a"],{gutter:16},h.a.createElement(b["a"],{span:14},h.a.createElement(A["a"],{defaultActiveKey:"1",size:"small"},h.a.createElement(le,{tab:"\u7ec4\u4ef6",key:"1"},h.a.createElement(j.a,{mode:"json",theme:"xcode",onChange:this.handleChange,name:"UNIQUE_ID_OF_DIV",value:s,style:{minHeight:500,width:"100%"},editorProps:{$blockScrolling:1/0},tabSize:2})),h.a.createElement(le,{tab:"\u6570\u636e",key:"2",disabled:"chart"!==n.type},h.a.createElement(te,{userData:r,source:d,comId:l,echartOpt:p,onSubmit:this.handleSubmitData})))),h.a.createElement(b["a"],{span:10,style:{height:300}},h.a.createElement("h3",null,"\u9884\u89c8"),"chart"===n.type&&h.a.createElement(z["a"],{echartOpt:p,id:l,onClick:this.handleCurCom,active:!0,style:c,source:d,data:n,page:o,notMerge:!0}),"image"===n.type&&h.a.createElement(ae["a"],{imageOpt:p,id:l,onClick:this.handleCurCom,active:!0,style:c,data:n,page:o}),"text"===n.type&&h.a.createElement(ne["a"],{textOpt:p,id:l,onClick:this.handleCurCom,active:!0,style:c,data:n,page:o})))))}}]),t}(u["Component"]),J=B))||J),oe=re,ce=a("1pet"),ie=x["a"].Option,se=function(e){var t=e.children,a=I()(e,["children"]);return h.a.createElement(O["a"].Item,w()({},a,{style:{marginBottom:10,height:30},labelCol:{span:6},wrapperCol:{span:18}}),t)},de=(H=Object(y["connect"])(function(e){var t=e.design,a=e.loading,n=e.data;return{design:t,loading:a,sourceData:n}}),V=O["a"].create({mapPropsToFields:function(e){return{width:O["a"].createFormField({value:e.layout.w,type:"layout"}),height:O["a"].createFormField({value:e.layout.h,type:"layout"}),x:O["a"].createFormField({value:e.layout.x,type:"layout"}),y:O["a"].createFormField({value:e.layout.y,type:"layout"}),name:O["a"].createFormField({value:e.info.name,type:"info"}),theme:O["a"].createFormField({value:e.style.theme,type:"style"}),defaultTheme:O["a"].createFormField({value:e.page.component.defaultTheme,type:"component"}),background:O["a"].createFormField({value:e.page.style.background,type:"style"})}},onFieldsChange:function(e,t){var a=e.onFiledChange,n=e.comId;a(n,t)}}),H(Y=V((_=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=i()(this,(e=d()(t)).call.apply(e,[this].concat(r))),a.handleSubmitEchartOpt=function(e,t){var n=a.props,l=n.dispatch,r=n.comId;l({type:"design/changeEchartOpt",payload:{comId:r,echartOpt:e}}),l({type:"design/changeDataOpt",payload:{comId:r,source:t}})},a.handleComEditor=function(e,t){var n=a.props.dispatch;n({type:"design/toggleComEditor",payload:{show:!0}})},a}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.form.getFieldDecorator,n=e.comId,l=e.layout,r=e.sourceData.list,o=e.page,c=e.style;return h.a.createElement("div",{className:N.a.container},t&&h.a.createElement(u["Fragment"],null,h.a.createElement(O["a"],null,h.a.createElement("div",{className:N.a.block},h.a.createElement("h3",null,"\u4fe1\u606f"),h.a.createElement(se,{label:"id"},h.a.createElement(k["a"],{size:"small",disabled:!0,value:n})),h.a.createElement(se,{label:"\u540d\u79f0"},a("name",{})(h.a.createElement(k["a"],{size:"small"})))),h.a.createElement("div",{className:N.a.block},h.a.createElement("h3",null,"\u6837\u5f0f"),"$PAGE$"===n&&h.a.createElement(se,{label:"\u9875\u9762\u80cc\u666f\u8272"},a("background",{})(h.a.createElement(k["a"],{size:"small"}))),"$PAGE$"!==n&&h.a.createElement(v["a"],{gutter:5},h.a.createElement(b["a"],{span:12},h.a.createElement(se,{label:"\u5bbd\u5ea6"},a("width",{})(h.a.createElement(C["a"],{disabled:!0,min:1,style:{width:"80%"},size:"small"})))),h.a.createElement(b["a"],{span:12},h.a.createElement(se,{label:"\u9ad8\u5ea6"},a("height",{})(h.a.createElement(C["a"],{disabled:!0,min:1,style:{width:"80%"},size:"small"}))))),"$PAGE$"!==n&&h.a.createElement(v["a"],{gutter:5},h.a.createElement(b["a"],{span:12},h.a.createElement(se,{label:"X"},a("x",{})(h.a.createElement(C["a"],{disabled:!0,max:24,min:0,style:{width:"100%"},size:"small"})))),h.a.createElement(b["a"],{span:12},h.a.createElement(se,{label:"Y"},a("y",{})(h.a.createElement(C["a"],{disabled:!0,max:24,min:0,style:{width:"100%"},size:"small"})))))),"$PAGE$"===n?h.a.createElement("div",{className:N.a.block},h.a.createElement("h3",null,"\u7ec4\u4ef6\u9ed8\u8ba4\u4e3b\u9898"),h.a.createElement(se,{label:"\u540d\u79f0"},a("defaultTheme",{})(h.a.createElement(x["a"],{size:"small"},h.a.createElement(ie,{value:""},"\u9ed8\u8ba4"),ce["g"].map(function(e){return h.a.createElement(ie,{key:e,value:e},e)}))))):h.a.createElement("div",{className:N.a.block},h.a.createElement("h3",null,"\u4e3b\u9898"),h.a.createElement(se,{label:"\u540d\u79f0"},a("theme",{})(h.a.createElement(x["a"],{size:"small"},h.a.createElement(ie,{value:""},"\u9ed8\u8ba4"),ce["g"].map(function(e){return h.a.createElement(ie,{key:e,value:e},e)}))))),h.a.createElement("div",{className:N.a.block},h.a.createElement("h3",null,"\u5c5e\u6027\u8868"),h.a.createElement("table",{className:N.a.propsTable},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,"key"),h.a.createElement("th",null,"value"))),h.a.createElement("tbody",null,l&&Object.keys(l).map(function(e){return h.a.createElement("tr",{key:e},h.a.createElement("td",null,e),h.a.createElement("td",null,l[e]))}),t&&t.style&&Object.keys(t.style).map(function(e){return h.a.createElement("tr",{key:e},h.a.createElement("td",null,e),h.a.createElement("td",null,l[e]))}))))),h.a.createElement(oe,{echartOpt:t.echartOpt,comId:n,source:t.source,data:t,onSubmit:this.handleSubmitEchartOpt,userDataList:r,style:c,page:o})))}}]),t}(u["Component"]),Y=_))||Y)||Y),pe=de,me=(a("tW4V"),a("oidH"),a("5lQw")),ue=a.n(me),he=(a("g9YV"),a("wCAj")),ye=A["a"].TabPane,ge=(Q=Object(y["connect"])(function(e){var t=e.design,a=e.data;return{design:t,userData:a}}),Q((Z=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=i()(this,(e=d()(t)).call.apply(e,[this].concat(r))),a.handleClose=function(){var e=a.props.dispatch;e({type:"design/toggleDataManager",payload:!1})},a}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.design.dataManagerShow,a=void 0!==t&&t,n=e.userData.list;return h.a.createElement("div",null,h.a.createElement(P["a"],{maskClosable:!1,onCancel:this.handleClose,footer:null,width:800,title:"\u6570\u636e\u7ba1\u7406",visible:a},h.a.createElement(A["a"],{defaultActiveKey:"1",size:"small"},h.a.createElement(ye,{tab:"\u6240\u6709",key:"1"},h.a.createElement(v["a"],{gutter:16},h.a.createElement(b["a"],{span:8},h.a.createElement(he["a"],{showHeader:!1,columns:[{title:"\u540d\u79f0",dataIndex:"name"}],dataSource:n,size:"small",pagination:!1})))),h.a.createElement(ye,{tab:"\u65b0\u5efa",key:"2"},"Content of Tab Pane 2"))))}}]),t}(u["Component"]),R=Z))||R),Ee=ge,fe=(K=Object(y["connect"])(function(e){var t=e.design,a=e.loading,n=e.data;return{design:t,userData:n,userDataLoading:a.effects["data/fetchUserDataList"],categoryLoading:a.effects["design/fetchCategoryComponents"],detailLoading:a.effects["design/fetchAppDetail"]}}),K((q=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=i()(this,(e=d()(t)).call.apply(e,[this].concat(r))),a.state={curComId:null},a.onLayoutChange=function(e){var t={};e.forEach(function(e){t[e.i]=e}),a.props.dispatch({type:"design/saveCurAppDesign",payload:{componentsLayout:t}})},a.handleCurCom=function(e,t){a.setState({curComId:e}),a.props.dispatch({type:"design/activeCurCom",payload:{activeCom:t}})},a.handleShowComEditor=function(e,t){a.setState({curComId:e}),a.props.dispatch({type:"design/toggleComEditor",payload:{activeCom:t,show:!0}})},a.handleFiledChange=function(e,t){var n=a.props.dispatch;if("$PAGE$"===e){var l={};Object.keys(t).forEach(function(e){l[e]=t[e].value,t[e].type&&n({type:"design/changePageSecondProps",payload:{fields:l,type:t[e].type}})})}else{var r={};Object.keys(t).forEach(function(a){r[a]=t[a].value,t[a].type&&n({type:"design/changeSecondProps",payload:{fields:r,type:t[a].type,comId:e}})})}},a.clickPage=function(){a.setState({curComId:"$PAGE$"}),a.props.dispatch({type:"design/activeCurCom",payload:{activeCom:null}})},a}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.match.params.id;t({type:"design/fetchAppDetail",payload:{id:a}}),t({type:"design/fetchCategoryComponents"}),t({type:"data/fetchUserDataList"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.design,n=a.curAppDesign,l=void 0===n?null:n,r=(a.dataManagerShow,t.userData.list,t.userDataLoading),o=this.state.curComId,c=l?l.page:{},i=l?l.components:{},s=l&&l.componentsLayout,d=i[o]||{},p=s&&(s[o]||{}),m=g["a"](s);return h.a.createElement("div",{className:ue.a.container},h.a.createElement("div",{className:ue.a.pageContainer},h.a.createElement("div",{className:ue.a.page,style:{width:1200,minHeight:900,backgroundColor:c.style&&c.style.background||"#ffffff"},onClick:this.clickPage},l&&!r&&h.a.createElement(f.a,{className:"layout",layout:m,rowHeight:45,width:1200,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:24,onLayoutChange:this.onLayoutChange},Object.keys(i).map(function(t){return h.a.createElement("div",{key:t},"chart"===i[t].type&&h.a.createElement(z["a"],{layoutOpt:s[t],echartOpt:i[t].echartOpt,id:t,onClick:e.handleCurCom,onDoubleClick:e.handleShowComEditor,active:t===o,style:i[t].style,source:i[t].source,data:i[t],page:c,notMerge:!0}),"image"===i[t].type&&h.a.createElement(ae["a"],{layoutOpt:s[t],imageOpt:i[t].echartOpt,id:t,onClick:e.handleCurCom,onDoubleClick:e.handleShowComEditor,active:t===o,style:i[t].style,data:i[t],page:c}),"text"===i[t].type&&h.a.createElement(ne["a"],{layoutOpt:s[t],textOpt:i[t].echartOpt,id:t,onClick:e.handleCurCom,onDoubleClick:e.handleShowComEditor,active:t===o,style:i[t].style,data:i[t],page:c}))})))),l&&h.a.createElement(pe,{layout:p||{},style:d.style||{},info:d.info||{},onFiledChange:this.handleFiledChange,page:c,comId:o||"$PAGE$",data:"$PAGE$"!==(o||"$PAGE$")?i[o]:l.page}),h.a.createElement(Ee,null))}}]),t}(u["Component"]),W=q))||W);t["default"]=fe},"5lQw":function(e,t,a){e.exports={menuItemName:"antd-pro-pages-design-index-menuItemName",menuItemThumb:"antd-pro-pages-design-index-menuItemThumb",container:"antd-pro-pages-design-index-container",propsEditor:"antd-pro-pages-design-index-propsEditor",pageContainer:"antd-pro-pages-design-index-pageContainer",page:"antd-pro-pages-design-index-page"}},FMjr:function(e,t,a){e.exports={container:"antd-pro-business-component-props-editor-index-container",title:"antd-pro-business-component-props-editor-index-title",block:"antd-pro-business-component-props-editor-index-block",text:"antd-pro-business-component-props-editor-index-text",formItem:"antd-pro-business-component-props-editor-index-formItem",propsTable:"antd-pro-business-component-props-editor-index-propsTable",contentInfo:"antd-pro-business-component-props-editor-index-contentInfo"}}}]);